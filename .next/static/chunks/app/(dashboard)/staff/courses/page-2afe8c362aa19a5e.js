(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6206],{1655:function(e,t,s){Promise.resolve().then(s.bind(s,9400))},9400:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var l=s(9692),a=s(9693),r=s(2727),n=s(460);function i(){var e;let[t,s]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)(""),[x,g]=(0,a.useState)("all"),[h,p]=(0,a.useState)("all"),[b,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),[y,N]=(0,a.useState)(!1),[C,w]=(0,a.useState)(null),[S,D]=(0,a.useState)(!1),[k,I]=(0,a.useState)(null),[E,L]=(0,a.useState)([]),[A,F]=(0,a.useState)([]),[O,B]=(0,a.useState)(!1),[P,U]=(0,a.useState)({title:"",code:"",description:"",category:"Food & Beverages",level:"NC I",duration:40,instructor:"Current Staff",maxStudents:25,status:"draft",allowSelfEnrollment:!0,coursePassword:""}),[M,T]=(0,a.useState)([]),[R,q]=(0,a.useState)("course"),[J,z]=(0,a.useState)(!1),[G,H]=(0,a.useState)(null),[Z,_]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{console.log("\uD83D\uDD0D DEBUG: Fetching courses from API and localStorage...");let e=await fetch("/api/staff/courses",{method:"GET",headers:{"Content-Type":"application/json"}}),t=[];e.ok?(t=(await e.json()).courses||[],console.log("\uD83D\uDD0D DEBUG: Successfully fetched default courses:",t.length)):console.error("\uD83D\uDD0D DEBUG: Failed to fetch default courses, using empty array");let l=[];try{let e=localStorage.getItem("demo-courses");e&&(l=JSON.parse(e),console.log("\uD83D\uDD0D DEBUG: Found user-created courses in localStorage:",l.length))}catch(e){console.error("\uD83D\uDD0D DEBUG: Error reading from localStorage:",e)}let a=[...t,...l].map(e=>{var t,s;return{...e,code:e.code||"".concat(null===(t=e.category)||void 0===t?void 0:t.substring(0,3).toUpperCase()).concat(Math.floor(900*Math.random())+100),totalLessons:e.totalLessons||0,completedLessons:e.completedLessons||0,completionRate:e.completionRate||0,pendingSubmissions:e.pendingSubmissions||0,coursePassword:e.coursePassword||"",allowSelfEnrollment:null===(s=e.allowSelfEnrollment)||void 0===s||s}});console.log("\uD83D\uDD0D DEBUG: Total courses (default + user-created):",a.length),s(a)}catch(e){console.error("Error fetching courses:",e);try{let e=localStorage.getItem("demo-courses");if(e){let t=JSON.parse(e).map(e=>{var t,s;return{...e,code:e.code||"".concat(null===(t=e.category)||void 0===t?void 0:t.substring(0,3).toUpperCase()).concat(Math.floor(900*Math.random())+100),totalLessons:e.totalLessons||0,completedLessons:e.completedLessons||0,completionRate:e.completionRate||0,pendingSubmissions:e.pendingSubmissions||0,coursePassword:e.coursePassword||"",allowSelfEnrollment:null===(s=e.allowSelfEnrollment)||void 0===s||s}});console.log("\uD83D\uDD0D DEBUG: Fallback: loaded courses from localStorage only:",t.length),s(t)}else s([])}catch(e){console.error("\uD83D\uDD0D DEBUG: Fallback also failed:",e),s([])}}finally{c(!1)}})()},[]),(0,a.useEffect)(()=>{L([{id:"1",name:"John Doe",email:"john.doe@email.com",studentId:"STU001"},{id:"2",name:"Jane Smith",email:"jane.smith@email.com",studentId:"STU002"},{id:"3",name:"Mike Johnson",email:"mike.johnson@email.com",studentId:"STU003"},{id:"4",name:"Sarah Wilson",email:"sarah.wilson@email.com",studentId:"STU004"},{id:"5",name:"David Brown",email:"david.brown@email.com",studentId:"STU005"}])},[]);let V=t.filter(e=>{let t=e.title.toLowerCase().includes(u.toLowerCase())||e.description.toLowerCase().includes(u.toLowerCase())||e.instructor.toLowerCase().includes(u.toLowerCase()),s="all"===x||e.category===x,l="all"===h||e.status===h;return t&&s&&l}),W=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"draft":return"bg-yellow-100 text-yellow-800"}},K=e=>{switch(e){case"Food & Beverages":return"bg-blue-100 text-blue-800";case"Front Office":return"bg-purple-100 text-purple-800";case"Housekeeping":return"bg-green-100 text-green-800";case"Tourism":return"bg-orange-100 text-orange-800";case"Cookery":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},$=e=>{v(e),f(!0)},Q=e=>{w(e),N(!0)},X=e=>{let l=t.map(t=>t.id===e.id?e:t);s(l);try{let e=l.filter(e=>!["1"].includes(e.id));localStorage.setItem("demo-courses",JSON.stringify(e)),console.log("\uD83D\uDD0D DEBUG: Course edit saved to localStorage")}catch(e){console.error("\uD83D\uDD0D DEBUG: Error saving course edit to localStorage:",e)}N(!1),w(null),alert("Course updated successfully!")},Y=e=>{if(confirm("Are you sure you want to delete this course? This action cannot be undone.")){let l=t.filter(t=>t.id!==e);s(l);try{let e=l.filter(e=>!["1"].includes(e.id));localStorage.setItem("demo-courses",JSON.stringify(e)),console.log("\uD83D\uDD0D DEBUG: Course deletion saved to localStorage")}catch(e){console.error("\uD83D\uDD0D DEBUG: Error saving course deletion to localStorage:",e)}f(!1),v(null),alert("Course deleted successfully!")}},ee=e=>{I(e);try{let t=JSON.parse(localStorage.getItem("demo-enrollments")||"[]").filter(t=>t.courseId===e.id),s=E.filter(e=>t.some(t=>t.studentId===e.id));F(s)}catch(e){console.error("Error loading enrolled students:",e),F([])}D(!0)},et=e=>{if(k)try{F(t=>[...t,e]);let l=JSON.parse(localStorage.getItem("demo-enrollments")||"[]"),a={id:Date.now().toString(),studentId:e.id,courseId:k.id,enrolledAt:new Date().toISOString(),status:"active",progress:0};l.push(a),localStorage.setItem("demo-enrollments",JSON.stringify(l));let r=t.map(e=>e.id===k.id?{...e,enrolledStudents:e.enrolledStudents+1}:e);s(r);let n=r.filter(e=>!["1"].includes(e.id));localStorage.setItem("demo-courses",JSON.stringify(n)),alert("".concat(e.name," has been enrolled in the course!"))}catch(e){console.error("Error enrolling student:",e),alert("Failed to enroll student. Please try again.")}},es=e=>{if(k)try{F(t=>t.filter(t=>t.id!==e.id));let l=JSON.parse(localStorage.getItem("demo-enrollments")||"[]").filter(t=>!(t.studentId===e.id&&t.courseId===k.id));localStorage.setItem("demo-enrollments",JSON.stringify(l));let a=t.map(e=>e.id===k.id?{...e,enrolledStudents:Math.max(0,e.enrolledStudents-1)}:e);s(a);let r=a.filter(e=>!["1"].includes(e.id));localStorage.setItem("demo-courses",JSON.stringify(r)),alert("".concat(e.name," has been removed from the course."))}catch(e){console.error("Error removing student:",e),alert("Failed to remove student. Please try again.")}},el=(e,t,s)=>{T(l=>l.map((l,a)=>a===e?{...l,[t]:s}:l))},ea=e=>{T(t=>t.filter((t,s)=>s!==e))},er=e=>{T(t=>t.map((t,s)=>s===e?{...t,materials:[...t.materials,{name:"",type:"pdf",url:"",size:""}]}:t))},en=(e,t,s,l)=>{T(a=>a.map((a,r)=>r===e?{...a,materials:a.materials.map((e,a)=>a===t?{...e,[s]:l}:e)}:a))},ei=(e,t)=>{T(s=>s.map((s,l)=>l===e?{...s,materials:s.materials.filter((e,s)=>s!==t)}:s))},eo=e=>{T(t=>t.map((t,s)=>s===e?{...t,assignments:[...t.assignments,{title:"",description:"",dueDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}]}:t))},ed=(e,t,s,l)=>{T(a=>a.map((a,r)=>r===e?{...a,assignments:a.assignments.map((e,a)=>a===t?{...e,[s]:l}:e)}:a))},ec=(e,t)=>{T(s=>s.map((s,l)=>l===e?{...s,assignments:s.assignments.filter((e,s)=>s!==t)}:s))},eu=(e,t,s)=>{_(l=>l.map((l,a)=>a===e?{...l,[t]:s}:l))},em=e=>{_(t=>t.filter((t,s)=>s!==e))},ex=e=>{_(t=>t.map((t,s)=>s===e?{...t,materials:[...t.materials,{name:"",type:"pdf",url:"",size:""}]}:t))},eg=(e,t,s,l)=>{_(a=>a.map((a,r)=>r===e?{...a,materials:a.materials.map((e,a)=>a===t?{...e,[s]:l}:e)}:a))},eh=(e,t)=>{_(s=>s.map((s,l)=>l===e?{...s,materials:s.materials.filter((e,s)=>s!==t)}:s))},ep=e=>{_(t=>t.map((t,s)=>s===e?{...t,assignments:[...t.assignments,{id:"assignment-".concat(Date.now()),title:"",description:"",dueDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],status:"draft"}]}:t))},eb=(e,t,s,l)=>{_(a=>a.map((a,r)=>r===e?{...a,assignments:a.assignments.map((e,a)=>a===t?{...e,[s]:l}:e)}:a))},ef=(e,t)=>{_(s=>s.map((s,l)=>l===e?{...s,assignments:s.assignments.filter((e,s)=>s!==t)}:s))},ej=(e,t,s)=>{let l=URL.createObjectURL(s),a=Math.round(s.size/1024),r=a>1024?"".concat((a/1024).toFixed(1),"MB"):"".concat(a,"KB");_(a=>a.map((a,n)=>n===e?{...a,materials:a.materials.map((e,a)=>a===t?{...e,file:s,fileName:s.name,url:l,size:r,name:e.name||s.name.split(".")[0]}:e)}:a))},ev=e=>{switch(e){case"pdf":return".pdf";case"video":return".mp4,.avi,.mov,.wmv,.flv,.webm";case"document":return".doc,.docx,.txt,.rtf,.odt";case"link":return"";default:return"*"}},ey=e=>{switch(e){case"pdf":return"\uD83D\uDCC4";case"video":return"\uD83C\uDFA5";case"document":return"\uD83D\uDCDD";case"link":return"\uD83D\uDD17";default:return"\uD83D\uDCCE"}};return d?(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Course Management"}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage all courses and training programs"})]}),(0,l.jsxs)("button",{onClick:()=>B(!0),className:"btn-primary flex items-center space-x-2",children:[(0,l.jsx)(n.Z,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Create New Course"})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Courses"}),(0,l.jsx)("input",{type:"text",placeholder:"Search by title, description, or instructor...",value:u,onChange:e=>m(e.target.value),className:"input-field"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Category"}),(0,l.jsxs)("select",{value:x,onChange:e=>g(e.target.value),className:"input-field",children:[(0,l.jsx)("option",{value:"all",children:"All Categories"}),(0,l.jsx)("option",{value:"Food & Beverages",children:"Food & Beverages"}),(0,l.jsx)("option",{value:"Front Office",children:"Front Office"}),(0,l.jsx)("option",{value:"Housekeeping",children:"Housekeeping"}),(0,l.jsx)("option",{value:"Tourism",children:"Tourism"}),(0,l.jsx)("option",{value:"Cookery",children:"Cookery"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,l.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"input-field",children:[(0,l.jsx)("option",{value:"all",children:"All Status"}),(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"inactive",children:"Inactive"}),(0,l.jsx)("option",{value:"draft",children:"Draft"})]})]})]})}),(0,l.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:V.map(e=>(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(K(e.category)),children:e.category}),(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:e.level})]})]}),(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(W(e.status)),children:e.status})]}),(0,l.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),(0,l.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Instructor:"}),(0,l.jsx)("span",{className:"font-medium",children:e.instructor})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Duration:"}),(0,l.jsxs)("span",{className:"font-medium",children:[e.duration," hours"]})]}),(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Enrollment:"}),(0,l.jsxs)("span",{className:"font-medium",children:[e.enrolledStudents,"/",e.maxStudents]})]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.enrolledStudents/e.maxStudents*100,"%")}})}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,l.jsx)("button",{onClick:()=>$(e),className:"text-sm bg-blue-50 text-blue-600 hover:bg-blue-100 px-3 py-2 rounded-lg transition-colors",children:"View Details"}),(0,l.jsx)("button",{onClick:()=>Q(e),className:"text-sm bg-gray-50 text-gray-600 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors",children:"Edit Course"}),(0,l.jsx)(r.default,{href:"/staff/courses/".concat(e.id),className:"text-sm bg-purple-50 text-purple-600 hover:bg-purple-100 px-3 py-2 rounded-lg transition-colors inline-block text-center",children:"Manage Content"}),(0,l.jsx)("button",{onClick:()=>ee(e),className:"text-sm bg-green-50 text-green-600 hover:bg-green-100 px-3 py-2 rounded-lg transition-colors",children:"Manage Students"})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("button",{onClick:()=>Y(e.id),className:"text-sm bg-red-50 text-red-600 hover:bg-red-100 px-3 py-2 rounded-lg transition-colors",title:"Delete Course",children:"\uD83D\uDDD1️ Delete Course"})})]},e.id))}),0===V.length&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCDA"}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No courses found"}),(0,l.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]}),b&&j&&(0,l.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Course Details: ",j.title]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,l.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:j.description})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(K(j.category)," mt-1"),children:j.category})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Level"}),(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 mt-1",children:j.level})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Duration"}),(0,l.jsxs)("p",{className:"text-sm text-gray-900 mt-1",children:[j.duration," hours"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Instructor"}),(0,l.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:j.instructor})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Enrollment"}),(0,l.jsxs)("p",{className:"text-sm text-gray-900 mt-1",children:[j.enrolledStudents,"/",j.maxStudents," students"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(W(j.status)," mt-1"),children:j.status})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Created"}),(0,l.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(j.createdAt).toLocaleDateString()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Updated"}),(0,l.jsx)("p",{className:"text-sm text-gray-900 mt-1",children:new Date(j.updatedAt).toLocaleDateString()})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,l.jsx)("button",{onClick:()=>Y(j.id),className:"bg-red-50 text-red-600 hover:bg-red-100 px-4 py-2 rounded-lg transition-colors",children:"Delete Course"}),(0,l.jsx)("button",{onClick:()=>{f(!1),v(null)},className:"btn-secondary",children:"Close"})]})]})}),y&&C&&(0,l.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Edit Course: ",C.title]}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),X(C)},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title"}),(0,l.jsx)("input",{type:"text",required:!0,value:C.title,onChange:e=>w(t=>t?{...t,title:e.target.value}:null),className:"input-field"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,l.jsx)("textarea",{required:!0,rows:3,value:C.description,onChange:e=>w(t=>t?{...t,description:e.target.value}:null),className:"input-field"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,l.jsxs)("select",{required:!0,value:C.category,onChange:e=>w(t=>t?{...t,category:e.target.value}:null),className:"input-field",children:[(0,l.jsx)("option",{value:"Food & Beverages",children:"Food & Beverages"}),(0,l.jsx)("option",{value:"Front Office",children:"Front Office"}),(0,l.jsx)("option",{value:"Housekeeping",children:"Housekeeping"}),(0,l.jsx)("option",{value:"Tourism",children:"Tourism"}),(0,l.jsx)("option",{value:"Cookery",children:"Cookery"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level"}),(0,l.jsxs)("select",{required:!0,value:C.level,onChange:e=>w(t=>t?{...t,level:e.target.value}:null),className:"input-field",children:[(0,l.jsx)("option",{value:"NC I",children:"NC I"}),(0,l.jsx)("option",{value:"NC II",children:"NC II"}),(0,l.jsx)("option",{value:"NC III",children:"NC III"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (hours)"}),(0,l.jsx)("input",{type:"number",required:!0,min:"1",value:C.duration,onChange:e=>w(t=>t?{...t,duration:parseInt(e.target.value)||0}:null),className:"input-field"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Students"}),(0,l.jsx)("input",{type:"number",required:!0,min:"1",value:C.maxStudents,onChange:e=>w(t=>t?{...t,maxStudents:parseInt(e.target.value)||0}:null),className:"input-field"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructor"}),(0,l.jsx)("input",{type:"text",required:!0,value:C.instructor,onChange:e=>w(t=>t?{...t,instructor:e.target.value}:null),className:"input-field"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,l.jsxs)("select",{required:!0,value:C.status,onChange:e=>w(t=>t?{...t,status:e.target.value}:null),className:"input-field",children:[(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"inactive",children:"Inactive"}),(0,l.jsx)("option",{value:"draft",children:"Draft"})]})]})]}),(0,l.jsxs)("div",{className:"border-t pt-4",children:[(0,l.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Course Access Settings"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"allowSelfEnrollment",checked:C.allowSelfEnrollment,onChange:e=>w(t=>t?{...t,allowSelfEnrollment:e.target.checked}:null),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("label",{htmlFor:"allowSelfEnrollment",className:"ml-2 block text-sm text-gray-900",children:"Allow students to self-enroll with password"})]}),C.allowSelfEnrollment&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Password"}),(0,l.jsx)("input",{type:"text",placeholder:"Enter password for student enrollment",value:C.coursePassword||"",onChange:e=>w(t=>t?{...t,coursePassword:e.target.value}:null),className:"input-field"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Students will need this password to enroll in the course"})]})]})]}),(0,l.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,l.jsx)("button",{type:"submit",className:"btn-primary flex-1",children:"Save Changes"}),(0,l.jsx)("button",{type:"button",onClick:()=>{N(!1),w(null)},className:"btn-secondary flex-1",children:"Cancel"})]})]})]})}),S&&k&&(0,l.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Manage Students: ",k.title]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Available Students"}),(0,l.jsxs)("div",{className:"border rounded-lg p-4 max-h-96 overflow-y-auto",children:[E.filter(e=>!A.some(t=>t.id===e.id)).map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border-b last:border-b-0",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:e.email}),(0,l.jsxs)("p",{className:"text-xs text-gray-400",children:["ID: ",e.studentId]})]}),(0,l.jsx)("button",{onClick:()=>et(e),className:"bg-green-50 text-green-600 hover:bg-green-100 px-3 py-1 rounded text-sm transition-colors",disabled:k.enrolledStudents>=k.maxStudents,children:"Add"})]},e.id)),0===E.filter(e=>!A.some(t=>t.id===e.id)).length&&(0,l.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No available students"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:["Enrolled Students (",A.length,"/",k.maxStudents,")"]}),(0,l.jsxs)("div",{className:"border rounded-lg p-4 max-h-96 overflow-y-auto",children:[A.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border-b last:border-b-0",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:e.email}),(0,l.jsxs)("p",{className:"text-xs text-gray-400",children:["ID: ",e.studentId]})]}),(0,l.jsx)("button",{onClick:()=>es(e),className:"bg-red-50 text-red-600 hover:bg-red-100 px-3 py-1 rounded text-sm transition-colors",children:"Remove"})]},e.id)),0===A.length&&(0,l.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No enrolled students"})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-4 border-t",children:[(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["Course Password: ",(0,l.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:k.coursePassword||"Not set"}),k.allowSelfEnrollment?(0,l.jsx)("span",{className:"ml-2 text-green-600",children:"✓ Self-enrollment enabled"}):(0,l.jsx)("span",{className:"ml-2 text-red-600",children:"✗ Self-enrollment disabled"})]}),(0,l.jsx)("button",{onClick:()=>{D(!1),I(null),F([])},className:"btn-secondary",children:"Close"})]})]})}),O&&(0,l.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Course"}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"px-3 py-1 rounded-full text-sm ".concat("course"===R?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"),children:"1. Course Info"}),(0,l.jsx)("div",{className:"px-3 py-1 rounded-full text-sm ".concat("lessons"===R?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"),children:"2. Lessons & Content"})]})]}),"course"===R&&(0,l.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!P.title||!P.code||!P.description){alert("Please fill in all required fields.");return}q("lessons")},className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Title"}),(0,l.jsx)("input",{type:"text",required:!0,value:P.title||"",onChange:e=>U(t=>({...t,title:e.target.value})),className:"input-field",placeholder:"Enter course title"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Code"}),(0,l.jsx)("input",{type:"text",required:!0,value:P.code||"",onChange:e=>U(t=>({...t,code:e.target.value})),className:"input-field",placeholder:"Enter course code (e.g., RSO101)"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,l.jsx)("textarea",{required:!0,rows:3,value:P.description||"",onChange:e=>U(t=>({...t,description:e.target.value})),className:"input-field",placeholder:"Enter course description"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,l.jsxs)("select",{required:!0,value:P.category||"Food & Beverages",onChange:e=>U(t=>({...t,category:e.target.value})),className:"input-field",children:[(0,l.jsx)("option",{value:"Food & Beverages",children:"Food & Beverages"}),(0,l.jsx)("option",{value:"Front Office",children:"Front Office"}),(0,l.jsx)("option",{value:"Housekeeping",children:"Housekeeping"}),(0,l.jsx)("option",{value:"Tourism",children:"Tourism"}),(0,l.jsx)("option",{value:"Cookery",children:"Cookery"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level"}),(0,l.jsxs)("select",{required:!0,value:P.level||"NC I",onChange:e=>U(t=>({...t,level:e.target.value})),className:"input-field",children:[(0,l.jsx)("option",{value:"NC I",children:"NC I"}),(0,l.jsx)("option",{value:"NC II",children:"NC II"}),(0,l.jsx)("option",{value:"NC III",children:"NC III"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,l.jsxs)("select",{required:!0,value:P.status||"draft",onChange:e=>U(t=>({...t,status:e.target.value})),className:"input-field",children:[(0,l.jsx)("option",{value:"draft",children:"Draft"}),(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (hours)"}),(0,l.jsx)("input",{type:"number",required:!0,min:"1",value:P.duration||40,onChange:e=>U(t=>({...t,duration:parseInt(e.target.value)||40})),className:"input-field"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Students"}),(0,l.jsx)("input",{type:"number",required:!0,min:"1",value:P.maxStudents||25,onChange:e=>U(t=>({...t,maxStudents:parseInt(e.target.value)||25})),className:"input-field"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructor"}),(0,l.jsx)("input",{type:"text",required:!0,value:P.instructor||"Current Staff",onChange:e=>U(t=>({...t,instructor:e.target.value})),className:"input-field"})]})]}),(0,l.jsxs)("div",{className:"border-t pt-4",children:[(0,l.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Course Access Settings"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"newCourseAllowSelfEnrollment",checked:null===(e=P.allowSelfEnrollment)||void 0===e||e,onChange:e=>U(t=>({...t,allowSelfEnrollment:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,l.jsx)("label",{htmlFor:"newCourseAllowSelfEnrollment",className:"ml-2 block text-sm text-gray-900",children:"Allow students to self-enroll with password"})]}),P.allowSelfEnrollment&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Password"}),(0,l.jsx)("input",{type:"text",placeholder:"Enter password for student enrollment",value:P.coursePassword||"",onChange:e=>U(t=>({...t,coursePassword:e.target.value})),className:"input-field"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Students will need this password to enroll in the course"})]})]})]}),(0,l.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,l.jsx)("button",{type:"submit",className:"btn-primary flex-1",children:"Next: Add Lessons →"}),(0,l.jsx)("button",{type:"button",onClick:()=>{B(!1),U({title:"",code:"",description:"",category:"Food & Beverages",level:"NC I",duration:40,instructor:"Current Staff",maxStudents:25,status:"draft",allowSelfEnrollment:!0,coursePassword:""}),T([]),q("course")},className:"btn-secondary flex-1",children:"Cancel"})]})]}),"lessons"===R&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Course Lessons & Content"}),(0,l.jsxs)("button",{onClick:()=>{T(e=>[...e,{title:"",description:"",content:"",duration:45,materials:[],assignments:[]}])},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center space-x-2",children:[(0,l.jsx)(n.Z,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Add Lesson"})]})]}),(0,l.jsxs)("div",{className:"space-y-6 max-h-96 overflow-y-auto",children:[M.map((e,t)=>(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h5",{className:"text-md font-medium text-gray-900",children:["Lesson ",t+1]}),(0,l.jsx)("button",{onClick:()=>ea(t),className:"text-red-600 hover:text-red-700 text-sm",children:"Remove"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Title"}),(0,l.jsx)("input",{type:"text",value:e.title,onChange:e=>el(t,"title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Enter lesson title"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,l.jsx)("input",{type:"number",min:"1",value:e.duration,onChange:e=>el(t,"duration",parseInt(e.target.value)||45),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,l.jsx)("textarea",{rows:2,value:e.description,onChange:e=>el(t,"description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Enter lesson description"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),(0,l.jsx)("textarea",{rows:3,value:e.content,onChange:e=>el(t,"content",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Enter lesson content and learning objectives"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Materials"}),(0,l.jsx)("button",{onClick:()=>er(t),className:"text-blue-600 hover:text-blue-700 text-sm",children:"+ Add Material"})]}),(0,l.jsx)("div",{className:"space-y-2",children:e.materials.map((e,s)=>(0,l.jsxs)("div",{className:"bg-gray-50 p-3 rounded border",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[(0,l.jsx)("input",{type:"text",value:e.name,onChange:e=>en(t,s,"name",e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Material name"}),(0,l.jsxs)("select",{value:e.type,onChange:e=>en(t,s,"type",e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[(0,l.jsx)("option",{value:"pdf",children:"PDF"}),(0,l.jsx)("option",{value:"video",children:"Video"}),(0,l.jsx)("option",{value:"document",children:"Document"}),(0,l.jsx)("option",{value:"link",children:"Link"})]}),(0,l.jsx)("button",{onClick:()=>ei(t,s),className:"text-red-600 hover:text-red-700 text-sm",children:"Remove"})]}),"link"===e.type?(0,l.jsx)("input",{type:"url",value:e.url,onChange:e=>en(t,s,"url",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Enter URL (e.g., https://example.com)"}):(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("label",{className:"flex items-center justify-center px-3 py-2 border border-gray-300 rounded cursor-pointer hover:bg-gray-100 transition-colors",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600 mr-2",children:ey(e.type)}),(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"Upload File"}),(0,l.jsx)("input",{type:"file",accept:ev(e.type),onChange:l=>{var a;let r=null===(a=l.target.files)||void 0===a?void 0:a[0];if(r){let l=URL.createObjectURL(r),a=Math.round(r.size/1024),n=a>1024?"".concat((a/1024).toFixed(1),"MB"):"".concat(a,"KB");en(t,s,"url",l),en(t,s,"size",n),e.name||en(t,s,"name",r.name.split(".")[0])}},className:"hidden"})]}),e.url&&(0,l.jsx)("div",{className:"text-xs text-green-600 bg-green-50 p-1 rounded",children:"✓ File selected"})]})]},s))})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Assignments"}),(0,l.jsx)("button",{onClick:()=>eo(t),className:"text-blue-600 hover:text-blue-700 text-sm",children:"+ Add Assignment"})]}),(0,l.jsx)("div",{className:"space-y-2",children:e.assignments.map((e,s)=>(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-2 items-center",children:[(0,l.jsx)("input",{type:"text",value:e.title,onChange:e=>ed(t,s,"title",e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Assignment title"}),(0,l.jsx)("input",{type:"text",value:e.description,onChange:e=>ed(t,s,"description",e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Assignment description"}),(0,l.jsx)("input",{type:"date",value:e.dueDate,onChange:e=>ed(t,s,"dueDate",e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,l.jsx)("button",{onClick:()=>ec(t,s),className:"text-red-600 hover:text-red-700 text-sm",children:"Remove"})]},s))})]})]},t)),0===M.length&&(0,l.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,l.jsx)("p",{children:'No lessons added yet. Click "Add Lesson" to create your first lesson.'})})]}),(0,l.jsxs)("div",{className:"flex space-x-3 pt-4 border-t",children:[(0,l.jsx)("button",{onClick:()=>q("course"),className:"btn-secondary",children:"← Back"}),(0,l.jsxs)("button",{onClick:()=>{var e;if(!P.title||!P.code||!P.description){alert("Please fill in all required fields.");return}let l=Date.now().toString(),a={id:l,title:P.title,code:P.code,description:P.description,category:P.category||"Food & Beverages",level:P.level||"NC I",duration:P.duration||40,instructor:P.instructor||"Current Staff",enrolledStudents:0,maxStudents:P.maxStudents||25,totalLessons:M.length,completedLessons:0,completionRate:0,pendingSubmissions:M.reduce((e,t)=>e+t.assignments.length,0),status:P.status||"draft",coursePassword:P.coursePassword||"",allowSelfEnrollment:null===(e=P.allowSelfEnrollment)||void 0===e||e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},r=M.map((e,t)=>({id:"".concat(l,"-lesson-").concat(t+1),title:e.title,description:e.description,courseId:l,lessonNumber:t+1,contentType:"mixed",durationMinutes:e.duration,isPublished:"active"===a.status,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),completionRate:0,studentCount:0}));s(e=>[...e,a]),o(e=>[...e,...r]);try{let e=[...t,a].filter(e=>!["1"].includes(e.id));localStorage.setItem("demo-courses",JSON.stringify(e))}catch(e){console.error("Error saving course to localStorage:",e)}U({title:"",code:"",description:"",category:"Food & Beverages",level:"NC I",duration:40,instructor:"Current Staff",maxStudents:25,status:"draft",allowSelfEnrollment:!0,coursePassword:""}),T([]),q("course"),B(!1),alert("Course created successfully with lessons and materials!")},className:"btn-primary flex-1",children:["Create Course with ",M.length," Lesson",1!==M.length?"s":""]}),(0,l.jsx)("button",{onClick:()=>{B(!1),U({title:"",code:"",description:"",category:"Food & Beverages",level:"NC I",duration:40,instructor:"Current Staff",maxStudents:25,status:"draft",allowSelfEnrollment:!0,coursePassword:""}),T([]),q("course")},className:"btn-secondary",children:"Cancel"})]})]})]})}),J&&G&&(0,l.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-7xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Manage Course Content: ",G.title]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-500",children:[Z.length," Lesson",1!==Z.length?"s":""]}),(0,l.jsxs)("button",{onClick:()=>{_(e=>[...e,{id:"lesson-".concat(Date.now()),title:"",description:"",content:"",duration:45,materials:[],assignments:[]}])},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center space-x-2",children:[(0,l.jsx)(n.Z,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Add Lesson"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-6 max-h-96 overflow-y-auto mb-6",children:[Z.map((e,t)=>(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h4",{className:"text-lg font-medium text-gray-900",children:["Lesson ",t+1]}),(0,l.jsx)("button",{onClick:()=>em(t),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove Lesson"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lesson Title"}),(0,l.jsx)("input",{type:"text",value:e.title,onChange:e=>eu(t,"title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter lesson title"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),(0,l.jsx)("input",{type:"number",min:"1",value:e.duration,onChange:e=>eu(t,"duration",parseInt(e.target.value)||45),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,l.jsx)("textarea",{rows:2,value:e.description,onChange:e=>eu(t,"description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter lesson description"})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),(0,l.jsx)("textarea",{rows:4,value:e.content,onChange:e=>eu(t,"content",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter lesson content and learning objectives"})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h5",{className:"text-md font-medium text-gray-900",children:"Materials"}),(0,l.jsx)("button",{onClick:()=>ex(t),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"+ Add Material"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[e.materials.map((e,s)=>(0,l.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,l.jsx)("input",{type:"text",value:e.name,onChange:e=>eg(t,s,"name",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Material name"}),(0,l.jsxs)("select",{value:e.type,onChange:e=>eg(t,s,"type",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,l.jsx)("option",{value:"pdf",children:"PDF"}),(0,l.jsx)("option",{value:"video",children:"Video"}),(0,l.jsx)("option",{value:"document",children:"Document"}),(0,l.jsx)("option",{value:"link",children:"Link"})]}),(0,l.jsx)("button",{onClick:()=>eh(t,s),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove"})]}),"link"===e.type?(0,l.jsx)("input",{type:"url",value:e.url,onChange:e=>eg(t,s,"url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Enter URL (e.g., https://example.com)"}):(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsxs)("label",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600 mr-2",children:ey(e.type)}),(0,l.jsx)("span",{className:"text-sm text-gray-600",children:e.fileName?"Change File":"Upload File"}),(0,l.jsx)("input",{type:"file",accept:ev(e.type),onChange:e=>{var l;let a=null===(l=e.target.files)||void 0===l?void 0:l[0];a&&ej(t,s,a)},className:"hidden"})]}),e.fileName&&(0,l.jsxs)("div",{className:"flex-1 text-sm text-gray-600",children:[(0,l.jsx)("span",{className:"font-medium",children:e.fileName}),e.size&&(0,l.jsxs)("span",{className:"text-gray-400 ml-2",children:["(",e.size,")"]})]})]}),e.fileName&&(0,l.jsx)("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded",children:"✓ File uploaded successfully"})]})]},s)),0===e.materials.length&&(0,l.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No materials added yet"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h5",{className:"text-md font-medium text-gray-900",children:"Assignments"}),(0,l.jsx)("button",{onClick:()=>ep(t),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"+ Add Assignment"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[e.assignments.map((e,s)=>(0,l.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,l.jsx)("input",{type:"text",value:e.title,onChange:e=>eb(t,s,"title",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Assignment title"}),(0,l.jsx)("input",{type:"date",value:e.dueDate,onChange:e=>eb(t,s,"dueDate",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),(0,l.jsxs)("select",{value:e.status||"draft",onChange:e=>eb(t,s,"status",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[(0,l.jsx)("option",{value:"draft",children:"Draft"}),(0,l.jsx)("option",{value:"published",children:"Published"})]})]}),(0,l.jsx)("textarea",{rows:2,value:e.description,onChange:e=>eb(t,s,"description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm mb-3",placeholder:"Assignment description"}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"published"===e.status?"Published":"Draft"}),(0,l.jsx)("button",{onClick:()=>ef(t,s),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove Assignment"})]})]},s)),0===e.assignments.length&&(0,l.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No assignments added yet"})]})]})]},t)),0===Z.length&&(0,l.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDA"}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No lessons yet"}),(0,l.jsx)("p",{className:"text-gray-500",children:'Click "Add Lesson" to create your first lesson.'})]})]}),(0,l.jsxs)("div",{className:"flex space-x-3 pt-4 border-t",children:[(0,l.jsx)("button",{onClick:()=>{if(G)try{localStorage.setItem("course-".concat(G.id,"-lessons"),JSON.stringify(Z));let e=Z.reduce((e,t)=>e+t.assignments.length,0),l={...G,totalLessons:Z.length,pendingSubmissions:e,updatedAt:new Date().toISOString()},a=t.map(e=>e.id===G.id?l:e);s(a);let r=a.filter(e=>!["1"].includes(e.id));localStorage.setItem("demo-courses",JSON.stringify(r)),z(!1),H(null),_([]),alert("Course content updated successfully!")}catch(e){console.error("Error saving course content:",e),alert("Failed to save course content. Please try again.")}},className:"btn-primary flex-1",children:"Save Content Changes"}),(0,l.jsx)("button",{onClick:()=>{z(!1),H(null),_([])},className:"btn-secondary flex-1",children:"Cancel"})]})]})})]})}},5997:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var l=s(9693),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var n=(e,t)=>{let s=(0,l.forwardRef)((s,n)=>{let{color:i="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,children:u,...m}=s;return(0,l.createElement)("svg",{ref:n,...a,width:o,height:o,stroke:i,strokeWidth:c?24*Number(d)/Number(o):d,className:"lucide lucide-".concat(r(e)),...m},[...t.map(e=>{let[t,s]=e;return(0,l.createElement)(t,s)}),...(Array.isArray(u)?u:[u])||[]])});return s.displayName="".concat(e),s}},460:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(5997).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},function(e){e.O(0,[2727,5248,5633,1744],function(){return e(e.s=1655)}),_N_E=e.O()}]);