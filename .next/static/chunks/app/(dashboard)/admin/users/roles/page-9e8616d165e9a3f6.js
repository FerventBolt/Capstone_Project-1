(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1313],{8199:function(e,s,t){Promise.resolve().then(t.bind(t,3210))},3210:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return r}});var i=t(9692),a=t(9693);function r(){let[e,s]=(0,a.useState)([]),[t,r]=(0,a.useState)([]),[n,c]=(0,a.useState)(!0),[l,d]=(0,a.useState)(null),[m,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{r([{id:"1",name:"user.create",description:"Create new users",category:"User Management"},{id:"2",name:"user.read",description:"View user information",category:"User Management"},{id:"3",name:"user.update",description:"Update user information",category:"User Management"},{id:"4",name:"user.delete",description:"Delete users",category:"User Management"},{id:"5",name:"course.create",description:"Create new courses",category:"Course Management"},{id:"6",name:"course.read",description:"View course information",category:"Course Management"},{id:"7",name:"course.update",description:"Update course information",category:"Course Management"},{id:"8",name:"course.delete",description:"Delete courses",category:"Course Management"},{id:"9",name:"certification.create",description:"Create certifications",category:"Certification Management"},{id:"10",name:"certification.read",description:"View certifications",category:"Certification Management"},{id:"11",name:"certification.approve",description:"Approve certifications",category:"Certification Management"},{id:"12",name:"system.settings",description:"Manage system settings",category:"System Administration"},{id:"13",name:"reports.view",description:"View system reports",category:"Reporting"}]),s([{id:"1",name:"Admin",description:"Full system access with all permissions",permissions:["1","2","3","4","5","6","7","8","9","10","11","12","13"],userCount:2,createdAt:"2024-01-01 09:00:00"},{id:"2",name:"Staff",description:"Course instructors with limited administrative access",permissions:["2","6","7","10","13"],userCount:15,createdAt:"2024-01-01 09:00:00"},{id:"3",name:"Student",description:"Basic user access for course enrollment and certification",permissions:["2","6","10"],userCount:1230,createdAt:"2024-01-01 09:00:00"}])}catch(e){console.error("Error fetching roles and permissions:",e)}finally{c(!1)}})()},[]);let x=()=>{let e={};return t.forEach(s=>{e[s.category]||(e[s.category]=[]),e[s.category].push(s)}),e},u=e=>{d({...e}),o(!0)},g=async()=>{if(l)try{console.log("Updating role:",l),s(e=>e.map(e=>e.id===l.id?l:e)),o(!1),d(null),alert("Role updated successfully!")}catch(e){console.error("Error updating role:",e),alert("Failed to update role")}},h=e=>{if(!l)return;let s=l.permissions.includes(e);d(t=>({...t,permissions:s?t.permissions.filter(s=>s!==e):[...t.permissions,e]}))};return n?(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Roles & Permissions"}),(0,i.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage user roles and their permissions"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:e.map(e=>(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,i.jsx)("button",{onClick:()=>u(e),className:"text-blue-600 hover:text-blue-900 text-sm",children:"Edit"})]}),(0,i.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-gray-500",children:"Users:"}),(0,i.jsx)("span",{className:"font-medium",children:e.userCount})]}),(0,i.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-gray-500",children:"Permissions:"}),(0,i.jsx)("span",{className:"font-medium",children:e.permissions.length})]}),(0,i.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,i.jsx)("span",{className:"text-gray-500",children:"Created:"}),(0,i.jsx)("span",{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString()})]})]})]},e.id))}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,i.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Permissions"})}),(0,i.jsx)("div",{className:"p-6",children:Object.entries(x()).map(e=>{let[s,t]=e;return(0,i.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,i.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:s}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map(e=>(0,i.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})},e.id))})]},s)})})]}),m&&l&&(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Edit Role: ",l.name]}),(0,i.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name"}),(0,i.jsx)("input",{type:"text",value:l.name,onChange:e=>d(s=>({...s,name:e.target.value})),className:"input-field"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,i.jsx)("textarea",{value:l.description,onChange:e=>d(s=>({...s,description:e.target.value})),className:"input-field",rows:3})]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Permissions"}),Object.entries(x()).map(e=>{let[s,t]=e;return(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:s}),(0,i.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,i.jsxs)("label",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",checked:l.permissions.includes(e.id),onChange:()=>h(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.id))})]},s)})]}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[(0,i.jsx)("button",{onClick:g,className:"btn-primary flex-1",children:"Save Changes"}),(0,i.jsx)("button",{onClick:()=>{o(!1),d(null)},className:"btn-secondary flex-1",children:"Cancel"})]})]})})]})}}},function(e){e.O(0,[5248,5633,1744],function(){return e(e.s=8199)}),_N_E=e.O()}]);