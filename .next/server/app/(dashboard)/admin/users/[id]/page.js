(()=>{var e={};e.id=6284,e.ids=[6284],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39795:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>p,tree:()=>c}),s(91738),s(29533),s(67751),s(62777);var r=s(75493),a=s(86642),i=s(52430),l=s.n(i),d=s(55518),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);s.d(t,n);let c=["",{children:["(dashboard)",{children:["admin",{children:["users",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,91738)),"C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\(dashboard)\\admin\\users\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,29533)),"C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,67751,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,62777)),"C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,67751,23)),"next/dist/client/components/not-found-error"]}],x=["C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\(dashboard)\\admin\\users\\[id]\\page.tsx"],o="/(dashboard)/admin/users/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/admin/users/[id]/page",pathname:"/admin/users/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},43914:(e,t,s)=>{Promise.resolve().then(s.bind(s,91621))},91621:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(51760),a=s(20017),i=s(45515);function l(){(0,i.useParams)();let e=(0,i.useRouter)(),[t,s]=(0,a.useState)(null),[l,d]=(0,a.useState)([]),[n,c]=(0,a.useState)(!0),[x,o]=(0,a.useState)("profile"),[m,p]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),[g,b]=(0,a.useState)(""),y=async e=>{if(t)try{console.log("DEBUG: Updating user status:",{id:t.id,status:e}),s({...t,status:e}),alert(`User status updated to ${e}`)}catch(e){console.error("Error updating user status:",e),alert("Failed to update user status")}},j=e=>{h(e),b(e.remarks||""),p(!0)},f=async e=>{if(u)try{console.log("Updating certificate:",u.id,e,g);let t=l.map(t=>t.id===u.id?{...t,status:"approve"===e?"approved":"rejected",remarks:g,reviewed_at:new Date().toISOString().split("T")[0],reviewed_by:"admin@lpu.edu.ph"}:t);d(t),p(!1),h(null),b(""),alert(`Certificate ${e}d successfully!`)}catch(e){console.error("Error updating certificate:",e),alert("Error updating certificate. Please try again.")}},N=async e=>{if(confirm("Are you sure you want to remove this certificate submission?"))try{console.log("Removing certificate:",e);let t=l.filter(t=>t.id!==e);d(t),alert("Certificate removed successfully!")}catch(e){console.error("Error removing certificate:",e),alert("Error removing certificate. Please try again.")}},v=e=>{switch(e){case"approved":return"text-green-600 bg-green-100";case"pending":return"text-yellow-600 bg-yellow-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return n?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):t?(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-xl font-medium text-blue-600",children:[t.firstName.charAt(0),t.lastName.charAt(0)]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[t.firstName," ",t.lastName]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 mt-2",children:[r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${(e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"staff":return"bg-blue-100 text-blue-800";case"student":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(t.role)}`,children:t.role}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800"}})(t.status)}`,children:t.status})]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>e.push("/admin/users"),className:"btn-secondary",children:"Back to Users"}),r.jsx("button",{onClick:()=>e.push(`/admin/users/${t.id}/edit`),className:"btn-primary",children:"Edit User"})]})]})}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"border-b border-gray-200",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[r.jsx("button",{onClick:()=>o("profile"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"profile"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Profile"}),"student"===t.role&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>o("courses"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"courses"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Courses (",t.courses?.length||0,")"]}),(0,r.jsxs)("button",{onClick:()=>o("certifications"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"certifications"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Certifications (",t.certifications?.length||0,")"]}),(0,r.jsxs)("button",{onClick:()=>o("submissions"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"submissions"===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Certificate Submissions (",l.length,")"]})]})]})})}),"profile"===x&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Email"}),r.jsx("p",{className:"text-sm text-gray-900",children:t.email})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Phone"}),r.jsx("p",{className:"text-sm text-gray-900",children:t.phone||"Not provided"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date of Birth"}),r.jsx("p",{className:"text-sm text-gray-900",children:t.dateOfBirth?new Date(t.dateOfBirth).toLocaleDateString():"Not provided"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Address"}),r.jsx("p",{className:"text-sm text-gray-900",children:t.address||"Not provided"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Emergency Contact"}),r.jsx("p",{className:"text-sm text-gray-900",children:t.emergencyContact||"Not provided"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Information"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Account Created"}),r.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Last Login"}),r.jsx("p",{className:"text-sm text-gray-900",children:"Never"===t.lastLogin?"Never":new Date(t.lastLogin).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:"Status"}),(0,r.jsxs)("select",{value:t.status,onChange:e=>y(e.target.value),className:"input-field",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"pending",children:"Pending"})]})]})]})]})]}),"courses"===x&&t.courses&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Enrolled Courses"})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrolled"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.courses.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.title}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${"completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:e.status.replace("_"," ")})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${e.progress}%`}})}),(0,r.jsxs)("span",{className:"text-sm text-gray-900",children:[e.progress,"%"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.enrolledAt).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.completedAt?new Date(e.completedAt).toLocaleDateString():"-"})]},e.id))})]})})]}),"certifications"===x&&t.certifications&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Certifications"})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Certification"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applied"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.certifications.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${"completed"===e.status?"bg-green-100 text-green-800":"approved"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:e.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.appliedAt).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.completedAt?new Date(e.completedAt).toLocaleDateString():"-"})]},e.id))})]})})]}),"submissions"===x&&"student"===t.role&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Certificate Submissions"})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Certificate"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.certificate_name}),r.jsx("div",{className:"text-sm text-gray-500",children:e.certificate_number})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-800",children:e.certificate_type})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.submitted_at}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${v(e.status)}`,children:e.status.toUpperCase()})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>j(e),className:"text-blue-600 hover:text-blue-500",children:"Review"}),r.jsx("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-500",children:"View File"}),r.jsx("button",{onClick:()=>N(e.id),className:"text-red-600 hover:text-red-500",children:"Remove"})]})})]},e.id))})]})})]}),m&&u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Review Certificate Submission"}),(0,r.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Student:"}),(0,r.jsxs)("p",{className:"text-sm text-gray-900",children:[t?.firstName," ",t?.lastName]}),r.jsx("p",{className:"text-xs text-gray-500",children:t?.email})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Certificate Type:"}),r.jsx("p",{className:"text-sm text-gray-900",children:u.certificate_type})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Certificate Name:"}),r.jsx("p",{className:"text-sm text-gray-900",children:u.certificate_name})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Certificate Number:"}),r.jsx("p",{className:"text-sm text-gray-900",children:u.certificate_number})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Course Name:"}),r.jsx("p",{className:"text-sm text-gray-900",children:u.course_name})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date Accredited:"}),r.jsx("p",{className:"text-sm text-gray-900",children:u.date_accredited})]}),u.expiration_date&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Expiration Date:"}),r.jsx("p",{className:"text-sm text-gray-900",children:u.expiration_date})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Certificate File:"}),r.jsx("div",{className:"mt-1",children:(0,r.jsxs)("a",{href:u.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-500 text-sm font-medium",children:["\uD83D\uDCC4 View ",u.file_name]})})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remarks:"}),r.jsx("textarea",{value:g,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Add remarks for approval or rejection..."})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>f("approve"),className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Approve"}),r.jsx("button",{onClick:()=>f("reject"),className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Reject"}),r.jsx("button",{onClick:()=>{p(!1),h(null),b("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors",children:"Cancel"})]})]})})]}):r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"User Not Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The user you're looking for doesn't exist."}),r.jsx("button",{onClick:()=>e.push("/admin/users"),className:"btn-primary",children:"Back to Users"})]})})}},91738:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(62616).createProxy)(String.raw`C:\CapstoneProject\Capstone_Project-main\src\app\(dashboard)\admin\users\[id]\page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[3469,6996,4780,187],()=>s(39795));module.exports=r})();