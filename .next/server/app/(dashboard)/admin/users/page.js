(()=>{var e={};e.id=1792,e.ids=[1792],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},64067:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(36288),s(70157),s(58187),s(17689);var a=s(74324),r=s(10829),l=s(61436),n=s.n(l),i=s(61456),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["(dashboard)",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,36288)),"C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\(dashboard)\\admin\\users\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,70157)),"C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,58187,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,17689)),"C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,58187,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\(dashboard)\\admin\\users\\page.tsx"],u="/(dashboard)/admin/users/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},40656:(e,t,s)=>{Promise.resolve().then(s.bind(s,64978))},64978:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(1233),r=s(95727),l=s(45187);function n(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,o]=(0,r.useState)(""),[d,c]=(0,r.useState)("all"),[u,m]=(0,r.useState)("all"),[x,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)({email:"",firstName:"",lastName:"",role:"student",status:"active"}),f=e.filter(e=>{let t=e.email.toLowerCase().includes(i.toLowerCase())||e.firstName.toLowerCase().includes(i.toLowerCase())||e.lastName.toLowerCase().includes(i.toLowerCase()),s="all"===d||e.role===d,a="all"===u||e.status===u;return t&&s&&a}),j=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"staff":return"bg-blue-100 text-blue-800";case"student":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},y=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800"}},b=async s=>{try{console.log("\uD83D\uDD0D DEBUG: User creation attempted with data:",s);let a=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await a.json();if(!a.ok)throw Error(r.error||"Failed to create user");console.log("\uD83D\uDD0D DEBUG: User created successfully:",r.user);try{let e=[...JSON.parse(localStorage.getItem("demo-users")||"[]"),r.user];localStorage.setItem("demo-users",JSON.stringify(e)),console.log("\uD83D\uDD0D DEBUG: User saved to localStorage, total users:",e.length)}catch(e){console.error("\uD83D\uDD0D DEBUG: Error saving to localStorage:",e)}let l=[...e,r.user];return t(l),alert("User created successfully!"),r.user}catch(e){throw console.error("Error creating user:",e),alert(`Failed to create user: ${e instanceof Error?e.message:"Unknown error"}`),e}},v=async s=>{try{console.log("\uD83D\uDD0D DEBUG: User update attempted with data:",s);let a=await fetch("/api/admin/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await a.json();if(!a.ok)throw Error(r.error||"Failed to update user");console.log("\uD83D\uDD0D DEBUG: User updated successfully:",r.user);try{let t=e.map(e=>e.id===s.id?r.user:e).filter(e=>!["1","2"].includes(e.id));localStorage.setItem("demo-users",JSON.stringify(t)),console.log("\uD83D\uDD0D DEBUG: User update saved to localStorage")}catch(e){console.error("\uD83D\uDD0D DEBUG: Error saving user update to localStorage:",e)}let l=e.map(e=>e.id===s.id?r.user:e);return t(l),alert("User updated successfully!"),r.user}catch(e){throw console.error("Error updating user:",e),alert(`Failed to update user: ${e instanceof Error?e.message:"Unknown error"}`),e}},N=async s=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{console.log("\uD83D\uDD0D DEBUG: User deletion attempted for ID:",s);let a=await fetch(`/api/admin/users?id=${s}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),r=await a.json();if(!a.ok)throw Error(r.error||"Failed to delete user");console.log("\uD83D\uDD0D DEBUG: User deleted successfully:",s);try{let t=e.filter(e=>e.id!==s).filter(e=>!["1","2"].includes(e.id));localStorage.setItem("demo-users",JSON.stringify(t)),console.log("\uD83D\uDD0D DEBUG: User deletion saved to localStorage")}catch(e){console.error("\uD83D\uDD0D DEBUG: Error saving user deletion to localStorage:",e)}let l=e.filter(e=>e.id!==s);t(l),alert("User deleted successfully!")}catch(e){console.error("Error deleting user:",e),alert(`Failed to delete user: ${e instanceof Error?e.message:"Unknown error"}`)}},D=async e=>{e.preventDefault();try{await b(h),g({email:"",firstName:"",lastName:"",role:"student",status:"active"}),p(!1)}catch(e){}};return s?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"p-6",children:[a.jsx("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage all users in the system"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>p(!0),className:"btn-primary",children:"Create New User"}),a.jsx(l.default,{href:"/admin/users/invitations",className:"btn-secondary",children:"Send Invitations"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Users"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:i,onChange:e=>o(e.target.value),className:"input-field"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Role"}),(0,a.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"input-field",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"staff",children:"Staff"}),a.jsx("option",{value:"student",children:"Student"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,a.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"input-field",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"pending",children:"Pending"})]})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["All Users (",f.length,")"]})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:[e.firstName.charAt(0),e.lastName.charAt(0)]})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),a.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j(e.role)}`,children:e.role})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(e.status)}`,children:e.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.lastLogin}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>{console.log("DEBUG: Edit user button clicked for user:",e.id);let t=prompt("Enter new first name:",e.firstName),s=prompt("Enter new last name:",e.lastName);t&&s&&v({...e,firstName:t,lastName:s})},className:"text-blue-600 hover:text-blue-900",children:"Edit"}),a.jsx("button",{onClick:()=>N(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"}),a.jsx("button",{onClick:()=>{console.log("DEBUG: View details button clicked for user:",e.id),window.location.href=`/admin/users/${e.id}`},className:"text-green-600 hover:text-green-900",children:"View Details"})]})})]},e.id))})]})})]}),x&&a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New User"}),(0,a.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",required:!0,value:h.email,onChange:e=>g(t=>({...t,email:e.target.value})),className:"input-field",placeholder:"user@lpu.edu.ph or user@lpunetwork.edu.ph"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),a.jsx("input",{type:"text",required:!0,value:h.firstName,onChange:e=>g(t=>({...t,firstName:e.target.value})),className:"input-field",placeholder:"First Name"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),a.jsx("input",{type:"text",required:!0,value:h.lastName,onChange:e=>g(t=>({...t,lastName:e.target.value})),className:"input-field",placeholder:"Last Name"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),(0,a.jsxs)("select",{value:h.role,onChange:e=>g(t=>({...t,role:e.target.value})),className:"input-field",children:[a.jsx("option",{value:"student",children:"Student"}),a.jsx("option",{value:"staff",children:"Staff"}),a.jsx("option",{value:"admin",children:"Admin"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,a.jsxs)("select",{value:h.status,onChange:e=>g(t=>({...t,status:e.target.value})),className:"input-field",children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Create User"}),a.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn-secondary flex-1",children:"Cancel"})]})]})]})})]})}},36288:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var a=s(30758);let r=(0,a.createProxy)(String.raw`C:\CapstoneProject\Capstone_Project-main\src\app\(dashboard)\admin\users\page.tsx`),{__esModule:l,$$typeof:n}=r;r.default;let i=(0,a.createProxy)(String.raw`C:\CapstoneProject\Capstone_Project-main\src\app\(dashboard)\admin\users\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9443,6649,8184,3208],()=>s(64067));module.exports=a})();