"use strict";(()=>{var e={};e.id=2628,e.ids=[2628],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57658:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>D,serverHooks:()=>U,staticGenerationAsyncStorage:()=>m});var t={};r.r(t),r.d(t,{DELETE:()=>d,GET:()=>l,POST:()=>u,PUT:()=>c});var n=r(40263),o=r(86642),i=r(43575),a=r(23082);async function u(e){try{let s=(e.headers.get("cookie")||"").split(";").find(e=>e.trim().startsWith("demo-session=")),r=null;if(s)try{let e=decodeURIComponent(s.split("=")[1]);r=JSON.parse(e),console.log("\uD83D\uDD0D DEBUG: Found demo session in Users API:",r)}catch(e){return console.error("\uD83D\uDD0D DEBUG: Error parsing demo session in Users API:",e),a.NextResponse.json({error:"Invalid session"},{status:401})}if(!r||!r.authenticated||"admin"!==r.role)return console.log("\uD83D\uDD0D DEBUG: Authentication failed - userSession:",r),a.NextResponse.json({error:"Unauthorized - Admin access required"},{status:403});console.log("\uD83D\uDD0D DEBUG: Admin authentication successful for Users API:",r.email);let{email:t,firstName:n,lastName:o,role:i,status:u}=await e.json();if(!t||!n||!o||!i)return a.NextResponse.json({error:"Missing required fields"},{status:400});let l={id:Date.now().toString(),email:t,firstName:n,lastName:o,role:i,status:u||"active",lastLogin:new Date().toISOString(),createdAt:new Date().toISOString()};return console.log("\uD83D\uDD0D DEBUG: User created successfully:",l),a.NextResponse.json({success:!0,user:l,message:"User created successfully"},{status:201})}catch(e){return console.error("Unexpected error creating user:",e),a.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function l(e){try{let s=(e.headers.get("cookie")||"").split(";").find(e=>e.trim().startsWith("demo-session=")),r=null;if(s)try{let e=decodeURIComponent(s.split("=")[1]);r=JSON.parse(e),console.log("\uD83D\uDD0D DEBUG: Found demo session in Users GET API:",r)}catch(e){return console.error("\uD83D\uDD0D DEBUG: Error parsing demo session in Users GET API:",e),a.NextResponse.json({error:"Invalid session"},{status:401})}if(!r||!r.authenticated)return console.log("\uD83D\uDD0D DEBUG: Authentication failed in Users GET - userSession:",r),a.NextResponse.json({error:"Unauthorized"},{status:401});return console.log("\uD83D\uDD0D DEBUG: Authentication successful for Users GET:",r.email),console.log("\uD83D\uDD0D DEBUG: Returning default users, frontend will merge with localStorage"),a.NextResponse.json({users:[{id:"1",email:"admin@lpu.edu.ph",firstName:"Admin",lastName:"User",role:"admin",status:"active",lastLogin:"2024-01-15T10:30:00.000Z",createdAt:"2024-01-01T09:00:00.000Z"},{id:"2",email:"student@lpunetwork.edu.ph",firstName:"Demo",lastName:"Student",role:"student",status:"active",lastLogin:"2024-01-14T16:15:00.000Z",createdAt:"2024-01-03T11:30:00.000Z"}]},{status:200})}catch(e){return console.error("Unexpected error fetching users:",e),a.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function c(e){try{let s=(e.headers.get("cookie")||"").split(";").find(e=>e.trim().startsWith("demo-session=")),r=null;if(s)try{let e=decodeURIComponent(s.split("=")[1]);r=JSON.parse(e),console.log("\uD83D\uDD0D DEBUG: Found demo session in Users PUT API:",r)}catch(e){return console.error("\uD83D\uDD0D DEBUG: Error parsing demo session in Users PUT API:",e),a.NextResponse.json({error:"Invalid session"},{status:401})}if(!r||!r.authenticated||"admin"!==r.role)return console.log("\uD83D\uDD0D DEBUG: Authentication failed - userSession:",r),a.NextResponse.json({error:"Unauthorized - Admin access required"},{status:403});let t=await e.json(),{id:n,email:o,firstName:i,lastName:u,role:l,status:c}=t;if(!n||!o||!i||!u||!l)return a.NextResponse.json({error:"Missing required fields"},{status:400});let d={id:n,email:o,firstName:i,lastName:u,role:l,status:c||"active",lastLogin:new Date().toISOString(),createdAt:t.createdAt||new Date().toISOString()};return console.log("\uD83D\uDD0D DEBUG: User updated successfully:",d),a.NextResponse.json({success:!0,user:d,message:"User updated successfully"},{status:200})}catch(e){return console.error("Unexpected error updating user:",e),a.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function d(e){try{let s=(e.headers.get("cookie")||"").split(";").find(e=>e.trim().startsWith("demo-session=")),r=null;if(s)try{let e=decodeURIComponent(s.split("=")[1]);r=JSON.parse(e),console.log("\uD83D\uDD0D DEBUG: Found demo session in Users DELETE API:",r)}catch(e){return console.error("\uD83D\uDD0D DEBUG: Error parsing demo session in Users DELETE API:",e),a.NextResponse.json({error:"Invalid session"},{status:401})}if(!r||!r.authenticated||"admin"!==r.role)return console.log("\uD83D\uDD0D DEBUG: Authentication failed - userSession:",r),a.NextResponse.json({error:"Unauthorized - Admin access required"},{status:403});let{searchParams:t}=new URL(e.url),n=t.get("id");if(!n)return a.NextResponse.json({error:"User ID is required"},{status:400});return console.log("\uD83D\uDD0D DEBUG: User deleted successfully:",n),a.NextResponse.json({success:!0,message:"User deleted successfully"},{status:200})}catch(e){return console.error("Unexpected error deleting user:",e),a.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let D=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/users/route",pathname:"/api/admin/users",filename:"route",bundlePath:"app/api/admin/users/route"},resolvedPagePath:"C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\api\\admin\\users\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:U}=D,g="/api/admin/users/route";function f(){return(0,i.patchFetch)({serverHooks:U,staticGenerationAsyncStorage:m})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[3469,4507],()=>r(57658));module.exports=t})();