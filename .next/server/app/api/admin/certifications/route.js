"use strict";(()=>{var e={};e.id=8211,e.ids=[8211],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},31108:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>D,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f});var r={};s.r(r),s.d(r,{DELETE:()=>d,GET:()=>u,POST:()=>c,PUT:()=>l});var o=s(40263),i=s(86642),n=s(43575),a=s(23082);async function c(e){try{let t=(e.headers.get("cookie")||"").split(";").find(e=>e.trim().startsWith("demo-session=")),s=null;if(t)try{let e=decodeURIComponent(t.split("=")[1]);s=JSON.parse(e),console.log("\uD83D\uDD0D DEBUG: Found demo session in Certifications API:",s)}catch(e){return console.error("\uD83D\uDD0D DEBUG: Error parsing demo session in Certifications API:",e),a.NextResponse.json({error:"Invalid session"},{status:401})}if(!s||!s.authenticated||"admin"!==s.role)return console.log("\uD83D\uDD0D DEBUG: Authentication failed - userSession:",s),a.NextResponse.json({error:"Unauthorized - Admin access required"},{status:403});console.log("\uD83D\uDD0D DEBUG: Admin authentication successful for Certifications API:",s.email);let{name:r,code:o,description:i,type:n,duration_hours:c,prerequisites:u,is_active:l}=await e.json();if(!r||!o||!i||!n||!c)return a.NextResponse.json({error:"Missing required fields"},{status:400});let d={id:Date.now().toString(),name:r,code:o,description:i,type:n,duration_hours:c,prerequisites:u||[],is_active:void 0===l||l,created_at:new Date().toISOString().split("T")[0],applications_count:0,completions_count:0};return console.log("\uD83D\uDD0D DEBUG: Certification created successfully:",d),a.NextResponse.json({success:!0,certification:d,message:"Certification created successfully"},{status:201})}catch(e){return console.error("Unexpected error creating certification:",e),a.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function u(e){try{let t=(e.headers.get("cookie")||"").split(";").find(e=>e.trim().startsWith("demo-session=")),s=null;if(t)try{let e=decodeURIComponent(t.split("=")[1]);s=JSON.parse(e),console.log("\uD83D\uDD0D DEBUG: Found demo session in Certifications GET API:",s)}catch(e){return console.error("\uD83D\uDD0D DEBUG: Error parsing demo session in Certifications GET API:",e),a.NextResponse.json({error:"Invalid session"},{status:401})}if(!s||!s.authenticated)return console.log("\uD83D\uDD0D DEBUG: Authentication failed in Certifications GET - userSession:",s),a.NextResponse.json({error:"Unauthorized"},{status:401});return console.log("\uD83D\uDD0D DEBUG: Authentication successful for Certifications GET:",s.email),console.log("\uD83D\uDD0D DEBUG: Returning default certifications, frontend will merge with localStorage"),a.NextResponse.json({certifications:[{id:"1",name:"Food & Beverages Services NC II",code:"FBS-NCII",description:"National Certificate II in Food & Beverages Services.",type:"food_beverages",duration_hours:320,prerequisites:["Basic Food Safety"],is_active:!0,created_at:"2023-01-15",applications_count:5,completions_count:3},{id:"2",name:"Tourism Services NC II",code:"TS-NCII",description:"National Certificate II in Tourism Services.",type:"tourism",duration_hours:280,prerequisites:["Communication Skills"],is_active:!0,created_at:"2023-01-15",applications_count:3,completions_count:2}]},{status:200})}catch(e){return console.error("Unexpected error fetching certifications:",e),a.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function l(e){try{let t=(e.headers.get("cookie")||"").split(";").find(e=>e.trim().startsWith("demo-session=")),s=null;if(t)try{let e=decodeURIComponent(t.split("=")[1]);s=JSON.parse(e),console.log("\uD83D\uDD0D DEBUG: Found demo session in Certifications PUT API:",s)}catch(e){return console.error("\uD83D\uDD0D DEBUG: Error parsing demo session in Certifications PUT API:",e),a.NextResponse.json({error:"Invalid session"},{status:401})}if(!s||!s.authenticated||"admin"!==s.role)return console.log("\uD83D\uDD0D DEBUG: Authentication failed - userSession:",s),a.NextResponse.json({error:"Unauthorized - Admin access required"},{status:403});let r=await e.json(),{id:o,name:i,code:n,description:c,type:u,duration_hours:l,prerequisites:d,is_active:D}=r;if(!o||!i||!n||!c||!u||!l)return a.NextResponse.json({error:"Missing required fields"},{status:400});let p={id:o,name:i,code:n,description:c,type:u,duration_hours:l,prerequisites:d||[],is_active:void 0===D||D,created_at:r.created_at||new Date().toISOString().split("T")[0],applications_count:r.applications_count||0,completions_count:r.completions_count||0};return console.log("\uD83D\uDD0D DEBUG: Certification updated successfully:",p),a.NextResponse.json({success:!0,certification:p,message:"Certification updated successfully"},{status:200})}catch(e){return console.error("Unexpected error updating certification:",e),a.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function d(e){try{let t=(e.headers.get("cookie")||"").split(";").find(e=>e.trim().startsWith("demo-session=")),s=null;if(t)try{let e=decodeURIComponent(t.split("=")[1]);s=JSON.parse(e),console.log("\uD83D\uDD0D DEBUG: Found demo session in Certifications DELETE API:",s)}catch(e){return console.error("\uD83D\uDD0D DEBUG: Error parsing demo session in Certifications DELETE API:",e),a.NextResponse.json({error:"Invalid session"},{status:401})}if(!s||!s.authenticated||"admin"!==s.role)return console.log("\uD83D\uDD0D DEBUG: Authentication failed - userSession:",s),a.NextResponse.json({error:"Unauthorized - Admin access required"},{status:403});let{searchParams:r}=new URL(e.url),o=r.get("id");if(!o)return a.NextResponse.json({error:"Certification ID is required"},{status:400});return console.log("\uD83D\uDD0D DEBUG: Certification deleted successfully:",o),a.NextResponse.json({success:!0,message:"Certification deleted successfully"},{status:200})}catch(e){return console.error("Unexpected error deleting certification:",e),a.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let D=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/certifications/route",pathname:"/api/admin/certifications",filename:"route",bundlePath:"app/api/admin/certifications/route"},resolvedPagePath:"C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\api\\admin\\certifications\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:f,serverHooks:m}=D,g="/api/admin/certifications/route";function h(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[3469,4507],()=>s(31108));module.exports=r})();