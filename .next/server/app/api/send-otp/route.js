"use strict";(()=>{var e={};e.id=6984,e.ids=[6984],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},9523:e=>{e.exports=require("dns")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},26378:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>q,patchFetch:()=>v,requestAsyncStorage:()=>x,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{POST:()=>l});var o=t(81295),i=t(10829),p=t(50704),n=t(37572),a=t(66959),u=t(33929);let c=(0,a.eI)("https://gcvvoixmucjbhxfqfkxl.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function l(e){let{code:r}=await e.json(),{data:t,error:s}=await c.from("invitations").select("email").eq("code",r).single();if(s||!t)return n.NextResponse.json({error:"Invalid invitation code."},{status:400});let o=Math.floor(1e5+9e5*Math.random()).toString(),{error:i}=await c.from("invitations").update({otp:o}).eq("code",r);if(i)return n.NextResponse.json({error:"Failed to update OTP."},{status:500});let p=u.createTransport({host:process.env.SMTP_HOST,port:Number(process.env.SMTP_PORT),secure:!1,auth:{user:process.env.SMTP_USER,pass:process.env.SMTP_PASSWORD}});try{return await p.sendMail({from:`"CTE SkillsHub" <${process.env.SMTP_USER}>`,to:t.email,subject:"Your CTE SkillsHub OTP",html:`
        <p>Hello,</p>
        <p>Your OTP for CTE SkillsHub registration is:</p>
        <h2>${o}</h2>
        <p>Enter this code to continue your registration.</p>
        <p>Thank you!</p>
      `}),n.NextResponse.json({message:"OTP sent successfully."})}catch(e){return n.NextResponse.json({error:"Failed to send OTP email."},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/send-otp/route",pathname:"/api/send-otp",filename:"route",bundlePath:"app/api/send-otp/route"},resolvedPagePath:"C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\api\\send-otp\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:h,serverHooks:m}=d,q="/api/send-otp/route";function v(){return(0,p.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9443,5751,4903],()=>t(26378));module.exports=s})();