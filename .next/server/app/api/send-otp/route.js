"use strict";(()=>{var e={};e.id=6984,e.ids=[6984],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},61282:e=>{e.exports=require("child_process")},84770:e=>{e.exports=require("crypto")},80665:e=>{e.exports=require("dns")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},82452:e=>{e.exports=require("tls")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},50426:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>q,patchFetch:()=>v,requestAsyncStorage:()=>x,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{POST:()=>l});var o=t(40263),i=t(86642),p=t(43575),n=t(23082),a=t(75042),u=t(64385);let c=(0,a.eI)("https://gcvvoixmucjbhxfqfkxl.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function l(e){let{code:r}=await e.json(),{data:t,error:s}=await c.from("invitations").select("email").eq("code",r).single();if(s||!t)return n.NextResponse.json({error:"Invalid invitation code."},{status:400});let o=Math.floor(1e5+9e5*Math.random()).toString(),{error:i}=await c.from("invitations").update({otp:o}).eq("code",r);if(i)return n.NextResponse.json({error:"Failed to update OTP."},{status:500});let p=u.createTransport({host:process.env.SMTP_HOST,port:Number(process.env.SMTP_PORT),secure:!1,auth:{user:process.env.SMTP_USER,pass:process.env.SMTP_PASSWORD}});try{return await p.sendMail({from:`"CTE SkillsHub" <${process.env.SMTP_USER}>`,to:t.email,subject:"Your CTE SkillsHub OTP",html:`
        <p>Hello,</p>
        <p>Your OTP for CTE SkillsHub registration is:</p>
        <h2>${o}</h2>
        <p>Enter this code to continue your registration.</p>
        <p>Thank you!</p>
      `}),n.NextResponse.json({message:"OTP sent successfully."})}catch(e){return n.NextResponse.json({error:"Failed to send OTP email."},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/send-otp/route",pathname:"/api/send-otp",filename:"route",bundlePath:"app/api/send-otp/route"},resolvedPagePath:"C:\\CapstoneProject\\Capstone_Project-main\\src\\app\\api\\send-otp\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:h,serverHooks:m}=d,q="/api/send-otp/route";function v(){return(0,p.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[3469,4507,3677],()=>t(50426));module.exports=s})();